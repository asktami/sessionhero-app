(this["webpackJsonpsessionhero-app"]=this["webpackJsonpsessionhero-app"]||[]).push([[0],{16:function(e,t,n){},30:function(e,t,n){e.exports=n(58)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),s=n.n(o),c=n(62),l=n(14),i=n(25),u=n(29),m=n(2),d=n(3),h=n(5),p=n(4),f=n(6),E=r.a.createContext({sessionList:[],scheduleList:[],error:null,setError:function(){},clearError:function(){},setSessionList:function(){},setScheduleList:function(){},setFilterDay:function(){},setFilterTrack:function(){},clearFilters:function(){},setToggleId:function(){},toggleExpandAll:function(){},session:[],comments:[],setSession:function(){},setComments:function(){},clearSession:function(){},addComment:function(){},editComment:function(){},deleteComment:function(){}}),v=E,b=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sessionList:[],scheduleList:[],error:null,filterDay:"",filterTrack:"",toggleId:"",expandAll:!1,session:[],comments:[]},n.setError=function(e){n.setState({error:e})},n.clearError=function(){n.setState({error:null})},n.setSessionList=function(e){n.setState({sessionList:e})},n.setScheduleList=function(e){n.setState({scheduleList:e})},n.setFilterDay=function(e){n.setState({filterDay:e})},n.setFilterTrack=function(e){n.setState({filterTrack:e})},n.clearFilters=function(e){n.setState({filterDay:""}),n.setState({filterTrack:""})},n.toggleExpandAll=function(){n.setState({expandAll:!n.state.expandAll})},n.setToggleId=function(e){n.state.toggleId===e?n.setState({toggleId:""}):n.setState({toggleId:e})},n.setSession=function(e){n.setState({session:e})},n.setComments=function(e){n.setState({comments:e})},n.clearSession=function(){n.setSession([]),n.setComments([])},n.addComment=function(e){n.setComments([].concat(Object(u.a)(n.state.comments),[e]))},n.editComment=function(e){var t=n.state.comments.map((function(t){return t.id!==e.id?t:e}));n.setComments(t)},n.deleteComment=function(e){var t=n.state.comments.filter((function(t){return t.id!==e}));n.setComments(t)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e={error:this.state.error,setError:this.setError,clearError:this.clearError,sessionList:this.state.sessionList,scheduleList:this.state.scheduleList,setSessionList:this.setSessionList,setScheduleList:this.setScheduleList,setFilterDay:this.setFilterDay,setFilterTrack:this.setFilterTrack,filterDay:this.state.filterDay,filterTrack:this.state.filterTrack,clearFilters:this.clearFilters,setToggleId:this.setToggleId,toggleId:this.state.toggleId,toggleExpandAll:this.toggleExpandAll,expandAll:this.state.expandAll,session:this.state.session,comments:this.state.comments,setSession:this.setSession,setComments:this.setComments,clearSession:this.clearSession,addComment:this.addComment,editComment:this.editComment,deleteComment:this.deleteComment};return r.a.createElement(E.Provider,{value:e},this.props.children)}}]),t}(a.Component),g=n(64),y=n(61),j=n(59),S={DATASOURCE:"json",API_ENDPOINT:"https://my-json-server.typicode.com/asktami/sessionhero-app",AUTH_ENDPOINT:"https://reqres.in/api/login",TOKEN_KEY:"Sessionful-client-auth-token"},O={saveAuthToken:function(e){window.sessionStorage.setItem(S.TOKEN_KEY,e)},getAuthToken:function(){return window.sessionStorage.getItem(S.TOKEN_KEY)},clearAuthToken:function(){window.sessionStorage.removeItem(S.TOKEN_KEY)},hasAuthToken:function(){return!!O.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},k=O,x=n(13);function N(){return r.a.createElement("span",{className:"pipe"}," | ")}function w(e){var t=e.className,n=Object(x.a)(e,["className"]);return r.a.createElement("span",Object.assign({className:["required",t].join(" ")},n),"*")}function T(e){return e.split(" ").join("-").toLowerCase()}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";return new Date(e+" "+t).toLocaleString(n,{hour:"numeric",minute:"numeric",hour12:!0})}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return new Date(e).toLocaleDateString(t,{day:"numeric"})}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return new Date(e).toLocaleDateString(t,{weekday:"short"})}n(16);var A=n(60),P=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLogoutClick=function(){k.clearAuthToken()},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"renderLogoutLink",value:function(){return r.a.createElement("nav",null,r.a.createElement("div",null,r.a.createElement(j.a,{to:"/schedule"},"Schedule"),r.a.createElement(N,null),r.a.createElement(j.a,{to:"/"},"Sessions"),r.a.createElement(N,null),r.a.createElement(j.a,{onClick:this.handleLogoutClick,to:"/"},"Logout")))}},{key:"renderLoginLink",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{to:"/login"},"Log in"),r.a.createElement(N,null),r.a.createElement(j.a,{to:"/register"},"Register"))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",null,r.a.createElement(j.a,{to:"/",className:"logo"},"SessionHero")),k.hasAuthToken()?this.renderLogoutLink():this.renderLoginLink()))}}]),t}(a.Component),D=Object(A.a)(P),F=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"renderMessage",value:function(){switch(this.props.location.pathname){case"/":return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Search for conference sessions, add conference sessions to your schedule, comment on sessions, and see comments made by others."),r.a.createElement("p",null,"You need to register to add conference sessions to your schedule and comment on sessions."),r.a.createElement("p",null,"Demo Username: demoUser",r.a.createElement("br",null),"Demo Password: demoUser123*"));default:return null}}},{key:"render",value:function(){return r.a.createElement("header",{className:"hero"},r.a.createElement("h1",null,r.a.createElement(j.a,{to:"/"},"SessionHero")),k.hasAuthToken()?null:this.renderMessage())}}]),t}(a.Component),_=Object(A.a)(F),R=n(63);function U(e){var t=e.component,n=Object(x.a)(e,["component"]),a=t;return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return k.hasAuthToken()?r.a.createElement(a,e):r.a.createElement(R.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function q(e){var t=e.component,n=Object(x.a)(e,["component"]),a=t;return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return k.hasAuthToken()?r.a.createElement(R.a,{to:"/"}):r.a.createElement(a,e)}}))}var z={getSessions:function(){return fetch("".concat(S.API_ENDPOINT,"/sessions"),{headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getSchedule:function(){return fetch("".concat(S.API_ENDPOINT,"/schedule"),{headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getSession:function(e){return fetch("".concat(S.API_ENDPOINT,"/sessions/").concat(e),{headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getSessionComments:function(e){return fetch("".concat(S.API_ENDPOINT,"/sessions/").concat(e,"/comments"),{headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getComment:function(e){return fetch("".concat(S.API_ENDPOINT,"/comments/").concat(e),{headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteComment:function(e){return fetch("".concat(S.API_ENDPOINT,"/comments/").concat(e),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},editComment:function(e){return fetch("".concat(S.API_ENDPOINT,"/comments/").concat(e.id),{method:"PATCH",headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())},body:JSON.stringify({comment:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},addComment:function(e,t,n){return fetch("".concat(S.API_ENDPOINT,"/comments"),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())},body:JSON.stringify({session_id:e,rating:n,text:t})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},addScheduleItem:function(e,t){return fetch("".concat(S.API_ENDPOINT,"/schedule"),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())},body:JSON.stringify({session_id:e,user_id:t})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteScheduleItem:function(e){return fetch("".concat(S.API_ENDPOINT,"/schedule/").concat(e),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(k.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},B=n(12),M=(n(41),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).addToSchedule=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.log("---------- add to schedule"),n.context.sessionList.forEach((function(t){t.id===e&&(t.user_id=1)}));var a=n.context.sessionList.filter((function(e){return e.user_id===t}));n.context.setScheduleList(a),console.log("after ADD new scheduleList = ",n.context.scheduleList)},n.removeFromSchedule=function(e){console.log("---------- remove from schedule"),n.context.sessionList.map((function(t){t.id===e&&(t.user_id="")}));var t=n.context.scheduleList.filter((function(t){return t.id!==e}));n.context.setScheduleList(t),console.log("after REMOVE new scheduleList = ",n.context.scheduleList)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateSessionList",value:function(){var e=this.context,t=e.sessionList,n=void 0===t?[]:t,a=e.scheduleList,r=void 0===a?[]:a;n.forEach((function(e){r.forEach((function(t){t.session_id===e.id&&(e.user_id=t.user_id)}))})),console.log("sessionListItem update sessionList = ",n);var o=n.filter((function(e){return 1===e.user_id}));console.log("sessionListItem update newScheduleList = ",o),this.context.setScheduleList(o)}},{key:"render",value:function(){var e=this,t=this.context,n=t.setToggleId,a=t.toggleId,o=t.expandAll,s=this.props,c=s.session,l=s.pathname;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex-item-header-row"},r.a.createElement("div",null,r.a.createElement("span",{className:"day-name"},I(c.date))," ",r.a.createElement("span",{className:"day-of-week"},L(c.date))),r.a.createElement("div",{className:"track "+T(c.track)},c.track)),r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"flex-col-then-row cell-fixed-width-50"},r.a.createElement("div",{className:"cell-fixed-width-25 hide day-right-border border-"+T(c.track)},r.a.createElement("span",{className:"day-name"},I(c.date)),"\xa0",r.a.createElement("span",{className:"day-of-week"},L(c.date))),r.a.createElement("div",{className:"cell-fixed-width-25 time time-right-border border-"+T(c.track)},r.a.createElement("div",null,C(c.date,c.time_start),r.a.createElement("br",null),C(c.date,c.time_end))),r.a.createElement("div",{className:"description"},r.a.createElement("span",null,r.a.createElement(j.a,{to:"/sessions/".concat(c.id)},r.a.createElement("span",{className:"simple title"},c.name))),r.a.createElement("br",null),r.a.createElement("span",{className:"location"},c.location))),r.a.createElement("div",{className:"flex-col-then-row hide track "+T(c.track)},r.a.createElement("div",{className:"track-text"},c.track)),r.a.createElement("div",{className:"flex-col"},o||l.includes("/sessions/")?null:r.a.createElement("button",{className:"btn-expand-item","aria-expanded":"false","aria-label":"show-session-details-button",onClick:function(){return n(c.id)}},a===c.id?r.a.createElement(B.a,{icon:"chevron-up",size:"2x"}):r.a.createElement(B.a,{icon:"chevron-down",size:"2x"})),1===parseInt(c.user_id)?r.a.createElement("button",{className:"btn-add-to-schedule","aria-label":"add-session-to-schedule-button",onClick:function(){return e.removeFromSchedule(c.id)}},r.a.createElement(B.a,{icon:"star",size:"2x"})):r.a.createElement("button",{className:"btn-add-to-schedule","aria-label":"add-session-to-schedule-button",onClick:function(){return e.addToSchedule(c.id)}},r.a.createElement(B.a,{icon:["far","star"],size:"2x"})))),r.a.createElement("div",{className:"flex-footer-row toggle-content "+(o||a===c.id||l.includes("/sessions/")?"is-visible":null)},r.a.createElement("div",null,r.a.createElement("p",{className:"simple "+T(c.track)},c.speaker),r.a.createElement("p",{className:"simple title"},"Session Description"),r.a.createElement("p",{className:"simple"},c.description),c.objective_1?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"simple title"},"Session Objectives"),r.a.createElement("ul",{className:"simple objective-list"},c.objective_1?r.a.createElement("li",null,c.objective_1):null,c.objective_2?r.a.createElement("li",null,c.objective_2):null,c.objective_3?r.a.createElement("li",null,c.objective_3):null,c.objective_4?r.a.createElement("li",null,c.objective_4):null)):null,c.background?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"simple title"},"Recommended Background"),r.a.createElement("p",{className:"simple"},c.background)):null)))}}]),t}(a.Component));M.contextType=v;n(42);var Y=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.clearError(),this.context.clearFilters(),Promise.all([z.getSchedule(),z.getSessions()]).then((function(t){var n=t[0],a=t[1];e.context.setScheduleList(n),e.context.setSessionList(a),e.updateSessionList()})).catch(this.context.setError)}},{key:"updateSessionList",value:function(){var e=this.context,t=e.sessionList,n=void 0===t?[]:t,a=e.scheduleList,r=void 0===a?[]:a;n.forEach((function(e){r.forEach((function(t){t.session_id===e.id&&(e.user_id=t.user_id)}))}));var o=n.filter((function(e){return 1===e.user_id}));this.context.setScheduleList(o)}},{key:"renderSessions",value:function(){var e=this,t=this.context.sessionList;return(void 0===t?[]:t).filter((function(t){return t.day.toLowerCase().includes(e.context.filterDay.toLowerCase())&&t.track.toLowerCase().includes(e.context.filterTrack.toLowerCase())})).map((function(t){return r.a.createElement("li",{className:"item",key:t.id},r.a.createElement(M,{session:t,pathname:e.props.location.pathname}))}))}},{key:"render",value:function(){var e=this.context.error;return console.log("sessionList in context = ",this.context.sessionList),console.log("scheduleList in context = ",this.context.scheduleList),r.a.createElement("section",null,e?r.a.createElement("p",{className:"error"},"There was an error, try again"):r.a.createElement("ul",{className:"sessions-list"},this.renderSessions()))}}]),t}(a.Component);function J(e){for(var t=e.rating,n=[{filled:!1},{filled:!1},{filled:!1},{filled:!1},{filled:!1}],a=0;a<t;a++)n[a].filled=!0;return r.a.createElement("span",{className:"SessionStarRating"},n.map((function(e,t){return r.a.createElement(K,{key:t,filled:e.filled})})))}function K(e){var t=e.filled?"fas":"far";return r.a.createElement(B.a,{className:"blue",icon:[t,"star"]})}Y.contextType=v;var H=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.context,t=e.session,n=e.comments,a=e.deleteComment;return r.a.createElement("ul",{className:"comment-list"},(n||[]).map((function(e){return r.a.createElement("li",{key:e.id,className:"comment-item"},r.a.createElement("div",{className:"comment-text"},e.text,r.a.createElement("br",null),r.a.createElement("div",{className:"flex-row comment-footer "},r.a.createElement("div",null,r.a.createElement(J,{rating:e.rating}),r.a.createElement("br",null),r.a.createElement("span",{className:"comment-user sponsor"},1===e.user_id?"LoggedIn User Created This Comment":"OtherFirst OtherLast")),1===e.user_id?r.a.createElement("div",{className:"flex-row comment-btns"},r.a.createElement("div",null,r.a.createElement(j.a,{to:"/comments/".concat(e.id,"?session=").concat(t.name)},r.a.createElement("button",{className:"btn-edit-comment"},"Edit"))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn-delete-comment",onClick:function(){return a(e.id)}},"Delete"))):null)))})))}}]),t}(a.Component);H.contextType=v;n(43);var V=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault();var t=n.context,a=t.session,r=t.addComment,o=t.setError,s=e.target,c=s.text,l=s.rating;z.addComment(a.id,c.value,Number(l.value)).then(r).then((function(){c.value=""})).catch(o)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"text"},r.a.createElement("textarea",{required:!0,"aria-label":"Type a comment...",name:"text",id:"text",placeholder:"Type a comment.."})),r.a.createElement("select",{required:!0,"aria-label":"Rate this session",type:"number",name:"rating",id:"rating"},r.a.createElement("option",{value:""},"Rate this session"),r.a.createElement("option",{value:"1"},"1 Star"),r.a.createElement("option",{value:"2"},"2 Stars"),r.a.createElement("option",{value:"3"},"3 Stars"),r.a.createElement("option",{value:"4"},"4 Stars"),r.a.createElement("option",{value:"5"},"5 Stars")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-save-comment",type:"submit"},"Save")))}}]),t}(a.Component);V.contextType=v;n(44);var G=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.session_id;this.context.clearError(),z.getSession(e).then(this.context.setSession).catch(this.context.setError),z.getSessionComments(e).then(this.context.setComments).catch(this.context.setError)}},{key:"componentWillUnmount",value:function(){this.context.clearSession()}},{key:"renderSession",value:function(){var e=this.context.session;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{session:e,pathname:this.props.location.pathname}),r.a.createElement(H,null),r.a.createElement(V,null))}},{key:"render",value:function(){var e,t=this.context,n=t.error,a=t.session;return e=n?"Session doesn't exist"===n.error?r.a.createElement("p",{className:"error"},"Session not found"):r.a.createElement("p",{className:"error"},"There was an error"):a.id?this.renderSession():r.a.createElement("div",{className:"loading"}),r.a.createElement("section",null,e)}}]),t}(a.Component);G.defaultProps={match:{params:{}}},G.contextType=v;n(45);var W=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.context.clearFilters()}},{key:"renderSchedule",value:function(){var e=this,t=this.context.scheduleList;return(void 0===t?[]:t).filter((function(t){return t.day.toLowerCase().includes(e.context.filterDay.toLowerCase())&&t.track.toLowerCase().includes(e.context.filterTrack.toLowerCase())})).map((function(t){return r.a.createElement("li",{className:"item",key:t.id},r.a.createElement(M,{session:t,pathname:e.props.location.pathname}))}))}},{key:"render",value:function(){var e=this.context.error;return r.a.createElement("section",null,e?r.a.createElement("p",{className:"error"},"There was an error, try again ",e):r.a.createElement("ul",{className:"sessions-list"},this.renderSchedule()))}}]),t}(a.Component);W.contextType=v;var Q=n(21);function X(e){return e.message?r.a.createElement("div",{className:"error",id:e.id},r.a.createElement("p",null,e.message)):r.a.createElement(r.a.Fragment,null)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var $=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={apiError:null,formValid:!0,errorCount:null,id:"",text:"",rating:"",session_id:"",errors:{text:"",rating:""}},n.updateErrorCount=function(){var e=n.state.errors,t=0;Object.values(e).forEach((function(e){e.length>0&&t++})),n.setState({errorCount:t});var a=0===t;n.setState({formValid:a})},n.validateField=function(e,t){var a="";"text"===e&&(0===t.length?a="You must enter a comment":t.length<5&&(a="The comment must be at least 5 characters long")),"rating"===e&&(0===t.length?a="You must enter a rating":(!Number.isInteger(t)||t<0||t>5)&&(a="The rating must be a number between 0 and 5"));var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){Object(Q.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state).errors;r[e]=a,n.setState({errors:r})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(Q.a)({},a,r)),n.validateField(a,r),n.updateErrorCount()},n.handleClickCancel=function(){n.props.history.push("/sessions/".concat(n.state.session_id))},n.resetFields=function(e){n.setState({id:e.id||"",text:e.text||"",rating:e.rating||"",session_id:e.session_id||""})},n.handleSubmit=function(e){if(e.preventDefault(),!(n.state.errorCount>0)){var t={id:n.props.match.params.commentId,text:n.state.text,rating:n.state.rating,modified:new Date};n.setState({apiError:null}),z.editComment(t).then(n.context.editComment).then((function(){n.resetFields(t),n.context.editComment(t),n.props.history.goBack()})).catch(n.context.setError)}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.commentId;fetch(S.API_ENDPOINT+"/comments/".concat(t),{method:"GET",headers:{"content-type":"application/json",authorization:"Bearer ".concat(S.API_KEY)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){e.setState({id:t.id,text:t.text,rating:t.rating,session_id:t.session_id})})).catch((function(t){e.setState({apiError:t})}))}},{key:"render",value:function(){var e=this.state,t=e.errors,n=e.text,a=e.rating;return this.state.apiError?r.a.createElement("p",{className:"error"},this.state.apiErrors):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement("legend",null),r.a.createElement("label",{htmlFor:"text"},"Comment"),r.a.createElement("textarea",{id:"text",name:"text",placeholder:"Type a comment..",required:!0,"aria-required":"true","aria-describedby":"textError","aria-label":"Edit comment...","aria-invalid":"true",value:n,onChange:this.handleChange}),t.text.length>0&&r.a.createElement(X,{id:"textError",message:t.text}),r.a.createElement("label",{htmlFor:"rating"},"Rating"),r.a.createElement("select",{id:"rating",name:"rating","aria-label":"Rating",required:!0,"aria-required":"true","aria-invalid":"true",value:a,onChange:this.handleChange},r.a.createElement("option",{value:""},"Rate this Session"),[1,2,3,4,5].map((function(e){return r.a.createElement("option",{key:e,value:e},e," Stars")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",r.a.createElement("button",{className:"btn-save-comment",disabled:!1===this.state.formValid,type:"submit"},"Save")),null!==this.state.errorCount?r.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(r.a.Component);$.contextType=v;var ee=$,te=n(27),ne=n.n(te),ae=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"renderMessage",value:function(){var e="";return this.props.location.search.includes("session")&&(e=ne.a.parse(this.props.location.search).session),"/"===this.props.location.pathname?r.a.createElement("h2",null,"View session details to plan your conference experience"):"/schedule"===this.props.location.pathname?r.a.createElement("h2",null,"Sessions in your schedule"):this.props.location.pathname.includes("/comments")?r.a.createElement("h2",null,e," "):null}},{key:"renderSearchBar",value:function(){var e=this.context,t=e.filterDay,n=e.filterTrack,a=e.setFilterDay,o=e.setFilterTrack,s=e.clearFilters,c=e.toggleExpandAll,l=e.expandAll;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"search-bar"},r.a.createElement("div",null,"/schedule"===this.props.location.pathname?r.a.createElement(j.a,{to:"/schedule",id:"btn-show-all",onClick:s},"Show All"):r.a.createElement(j.a,{to:"/",id:"btn-show-all",onClick:s},"Show All")),r.a.createElement("div",null,r.a.createElement("select",{id:"filter-day",name:"filter-day","aria-label":"Select by Day",value:t,onChange:function(e){return a(e.target.value)}},r.a.createElement("option",{value:""},"Select by Day"),r.a.createElement("option",{value:"mon","data-filter":"mon"},"Monday"),r.a.createElement("option",{value:"tue","data-filter":"tue"},"Tuesday"),r.a.createElement("option",{value:"wed","data-filter":"wed"},"Wednesday"),r.a.createElement("option",{value:"thu","data-filter":"thu"},"Thursday"))),r.a.createElement("div",null,r.a.createElement("select",{id:"filter-track",name:"filter-track","aria-label":"Select by Track",value:n,onChange:function(e){return o(e.target.value)}},r.a.createElement("option",{value:""},"Select by Track"),r.a.createElement("option",{value:"training","data-filter":"training"},"Training Day"),r.a.createElement("option",{value:"general","data-filter":"general"},"General"),r.a.createElement("option",{value:"create","data-filter":"create"},"Create"),r.a.createElement("option",{value:"share","data-filter":"share"},"Share"),r.a.createElement("option",{value:"integrate","data-filter":"integrate"},"Integrate"),r.a.createElement("option",{value:"business","data-filter":"business"},"Business"),r.a.createElement("option",{value:"sponsor","data-filter":"sponsor"},"Sponsor"),r.a.createElement("option",{value:"fba","data-filter":"fba"},"FBA"))),r.a.createElement("div",null,r.a.createElement(j.a,{to:"/schedule"===this.props.location.pathname?"/schedule":"/",id:"btn-expand-all",onClick:function(e){return c(e.target.value)}},l?"Collapse All":"Expand All"))),r.a.createElement("br",null),r.a.createElement("div",{className:"developer-note"},"Note: during this test:",r.a.createElement("br",null),'Clicking on the "Sessions" link loads default data overriding any records added/removed from schedule by clicking on the stars.',r.a.createElement("br",null),"Stars also won't work on the Session Detail page.",r.a.createElement("br",null),"Reloading the browser window also resets everything to the default data."))}},{key:"render",value:function(){return r.a.createElement("section",{className:"search-section"},this.renderMessage(),["/","/schedule"].includes(this.props.location.pathname)?this.renderSearchBar():null)}}]),t}(a.Component);ae.contextType=v;var re=Object(A.a)(ae),oe={postLogin:function(e){return fetch("".concat(S.AUTH_ENDPOINT,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postUser:function(e){return fetch("".concat(S.AUTH_ENDPOINT,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},se=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},n.handleSubmitBasicAuth=function(e){e.preventDefault();var t=e.target,a=t.username,r=t.password;k.saveAuthToken(k.makeBasicAuthToken(a.value,r.value)),a.value="",r.value="",n.props.onLoginSuccess()},n.handleSubmitJwtAuth=function(e){e.preventDefault(),n.setState({error:null});var t=e.target,a=t.username,r=t.password;oe.postLogin({username:a.value,password:r.value}).then((function(e){a.value="",r.value="",k.saveAuthToken(e.authToken),n.props.onLoginSuccess()})).catch((function(e){n.setState({error:e.error})}))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement("form",{onSubmit:this.handleSubmitJwtAuth},r.a.createElement("div",{role:"alert"},e&&r.a.createElement("p",{className:"error"},e)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"User name"),r.a.createElement("input",{type:"text",required:!0,name:"username",id:"username"})),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{required:!0,name:"password",type:"password",id:"password"})),r.a.createElement("button",{className:"btn-basic"},"Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"developer-note"},"Note: during this test:",r.a.createElement("br",null),"You can login with ANY username and password"))}}]),t}(a.Component);se.defaultProps={onLoginSuccess:function(){}};var ce=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleLoginSuccess=function(){var e=n.props,t=e.location,a=e.history,r=(t.state||{}).from||"/";a.push(r)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Login"),r.a.createElement(se,{onLoginSuccess:this.handleLoginSuccess}))}}]),t}(a.Component);ce.defaultProps={location:{},history:{push:function(){}}};var le=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},n.handleSubmit=function(e){e.preventDefault();var t=e.target,a=t.username,r=t.password,o=t.fullname;n.setState({error:null}),oe.postUser({username:a.value,password:r.value,fullname:o.value}).then((function(e){a.value="",r.value="",o.value="",n.props.onRegistrationSuccess()})).catch((function(e){n.setState({error:e.error})}))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement("form",{className:"RegistrationForm",onSubmit:this.handleSubmit},r.a.createElement("div",{role:"alert"},e&&r.a.createElement("p",{className:"error"},e)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"fullname"},"Fullname ",r.a.createElement(w,null)),r.a.createElement("input",{name:"fullname",type:"text",required:!0,id:"fullname"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username ",r.a.createElement(w,null)),r.a.createElement("input",{name:"username",type:"text",required:!0,id:"username"})),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"Password ",r.a.createElement(w,null)),r.a.createElement("input",{name:"password",type:"password",required:!0,id:"RegistrationForm__password"})),r.a.createElement("button",{className:"btn-basic"},"Register"))}}]),t}(a.Component);le.defaultProps={onRegistrationSuccess:function(){}};var ie=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleRegistrationSuccess=function(e){n.props.history.push("/login")},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(le,{onRegistrationSuccess:this.handleRegistrationSuccess}))}}]),t}(a.Component);ie.defaultProps={history:{push:function(){}}};var ue=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"404 - Page not found"),r.a.createElement("p",null,"Try going back to your previous page."))}}]),t}(a.Component),me=(n(57),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(_,null),r.a.createElement(re,null),r.a.createElement("main",{className:"wrapper"},this.state.hasError&&r.a.createElement("p",{className:"error"},"There was an error! Oh no!"),r.a.createElement(g.a,null,r.a.createElement(y.a,{exact:!0,path:"/",component:Y}),r.a.createElement(q,{path:"/login",component:ce}),r.a.createElement(q,{path:"/register",component:ie}),r.a.createElement(U,{path:"/sessions/:session_id",component:G}),r.a.createElement(U,{path:"/schedule",component:W}),r.a.createElement(U,{path:"/comments/:commentId",component:ee}),r.a.createElement(y.a,{component:ue}))))}}],[{key:"getDerivedStateFromError",value:function(e){return console.error(e),{hasError:!0}}}]),t}(a.Component)),de=n(28),he=n(20);l.b.add(i.a,he.a,he.b,de.a,he.c),s.a.render(r.a.createElement(c.a,{basename:""},r.a.createElement(b,null,r.a.createElement(me,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4a9d0548.chunk.js.map